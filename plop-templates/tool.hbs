import { z } from 'zod';
import { MapboxApiBasedTool } from '../MapboxApiBasedTool.js';
import type { HttpRequest } from '../../utils/types.js';
import { {{pascalCase name}}InputSchema } from './{{pascalCase name}}Tool.input.schema.js';
import {
  {{pascalCase name}}OutputSchema,
  type {{pascalCase name}}Output
} from './{{pascalCase name}}Tool.output.schema.js';

/**
 * {{pascalCase name}}Tool - TODO: Add description
 */
export class {{pascalCase name}}Tool extends MapboxApiBasedTool<
  typeof {{pascalCase name}}InputSchema,
  typeof {{pascalCase name}}OutputSchema
> {
  name = '{{toolName}}';
  description = 'TODO: Add tool description here.';
  annotations = {
    title: '{{pascalCase name}} Tool',
    readOnlyHint: true,
    destructiveHint: false,
    idempotentHint: true,
    openWorldHint: true
  };

  constructor({ httpRequest }: { httpRequest: HttpRequest }) {
    super({
      inputSchema: {{pascalCase name}}InputSchema,
      outputSchema: {{pascalCase name}}OutputSchema,
      httpRequest
    });
  }

  /**
   * Execute the tool logic
   * @param input - Validated input from {{pascalCase name}}InputSchema
   * @param accessToken - Mapbox access token
   * @returns CallToolResult with structured output
   */
  protected async execute(
    input: z.infer<typeof {{pascalCase name}}InputSchema>,
    accessToken: string
  ): Promise<any> {
    // TODO: Implement your tool logic here
    // Example:
    // const url = `${MapboxApiBasedTool.mapboxApiEndpoint}your-api-endpoint?access_token=${accessToken}`;
    // const response = await this.httpRequest(url);
    // if (!response.ok) {
    //   return {
    //     content: [{ type: 'text', text: `Error: ${response.statusText}` }],
    //     isError: true
    //   };
    // }
    // const data = (await response.json()) as {{pascalCase name}}Output;
    // return {
    //   content: [{ type: 'text', text: JSON.stringify(data, null, 2) }],
    //   structuredContent: data,
    //   isError: false
    // };
    throw new Error('Not implemented');
  }
}
